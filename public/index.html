<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Light.vn Works</title>
  <style>
    details { margin: 0.5em 0; }
    summary { cursor: pointer; font-weight: bold; }
    ul { list-style: none; padding-left: 1.5em; }
    a { text-decoration: none; color: #0066cc; }
  </style>
</head>
<body>
  <h1>Light.vn Works</h1>
  <p class="subtitle">Managed By: 雪原たかし (Lightvn Japan Rep.) • 2026</p>
  <div id="tree"></div>

  <script>
    fetch('/api/tree')
      .then(r => r.json())
      .then(data => renderTree(data, document.getElementById('tree')));

    function renderTree(node, parent) {
      if (node.is_dir) {
        const details = document.createElement('details');
        const summary = document.createElement('summary');
        summary.textContent = node.name;
        details.appendChild(summary);

        const ul = document.createElement('ul');
        node.children?.forEach(child => renderTree(child, ul));
        details.appendChild(ul);
        parent.appendChild(details);
      } else {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = node.path;
        a.textContent = node.name;
        a.target = "_blank"; // or remove if you want to open in same tab
        li.appendChild(a);
        parent.appendChild(li);
      }
    }
  </script>
</body>
</html>

